window.onload=()=>{var e=document.getElementById("speak-again-btn"),t=document.getElementById("admin-panel-btn");async function a(){try{return await chrome.storage.local.get(["History"])}catch(e){console.error("Could not load chat history -",e)}}async function o(){var n=(await a()).History,e=document.getElementById("history-text");if(console.log(n),!(n.length<1)){let t="";for(let e=0;e<n.length;e++)t=t.concat(`Input: ${n[e].user}
Response: ${n[e].response}

`);e.textContent=t}}e.addEventListener("click",async function(){try{a()&&await chrome.runtime.sendMessage({text:"speaks last message",type:"speakAgain",target:"service-worker"})}catch(e){console.error("Could not send request to speak last message -",e)}}),t.addEventListener("click",async function(){try{await chrome.runtime.sendMessage({text:"open admin panel",type:"openAdminPanel",target:"service-worker"})}catch(e){console.error("Could not send request to open admin panel -",e)}}),chrome.runtime.onMessage.addListener(async function(e,t,n){"chat-history"==e.target&&"updateHistory"===e.type&&await o()}),o()};